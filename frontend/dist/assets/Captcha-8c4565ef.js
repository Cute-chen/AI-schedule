import"./index-bcd0f302.js";/* empty css                 */import{_ as w}from"./_plugin-vue_export-helper-8da67cfc.js";import{W as x}from"./elementPlus-9365ac08.js";import{r as c,f,k as y,y as k,z as b,A as s,Q as S}from"./vendor-b2a91a46.js";const I={class:"captcha-container"},A={class:"captcha-input"},B={__name:"Captcha",props:{modelValue:{type:String,default:""}},emits:["update:modelValue","refresh"],setup(m,{expose:v,emit:_}){const h=m,i=_,d=c(null),l=c(h.modelValue),n=c("");f(()=>h.modelValue,e=>{l.value=e}),f(l,e=>{i("update:modelValue",e)});const g=()=>{const e="0123456789";let t="";for(let o=0;o<4;o++)t+=e.charAt(Math.floor(Math.random()*e.length));return n.value=t,t},p=()=>{const e=d.value;if(!e)return;const t=e.getContext("2d"),o=g();t.clearRect(0,0,e.width,e.height),t.fillStyle="#f5f5f5",t.fillRect(0,0,e.width,e.height);for(let a=0;a<6;a++)t.strokeStyle=r(),t.lineWidth=1,t.beginPath(),t.moveTo(Math.random()*e.width,Math.random()*e.height),t.lineTo(Math.random()*e.width,Math.random()*e.height),t.stroke();for(let a=0;a<o.length;a++){t.fillStyle=r(),t.font=`${20+Math.random()*8}px Arial`;const C=(Math.random()-.5)*.4,M=20+a*22,V=25+Math.random()*4;t.save(),t.translate(M,V),t.rotate(C),t.fillText(o[a],0,0),t.restore()}for(let a=0;a<50;a++)t.fillStyle=r(),t.beginPath(),t.arc(Math.random()*e.width,Math.random()*e.height,1,0,2*Math.PI),t.fill()},r=()=>{const e=["#409eff","#67c23a","#e6a23c","#f56c6c","#909399","#5cb87a","#1989fa","#ff976a","#ff6b6b","#4ecdc4"];return e[Math.floor(Math.random()*e.length)]},u=()=>{p(),i("refresh",n.value)};return v({validate:()=>l.value.toLowerCase()===n.value.toLowerCase(),refresh:u,getCaptchaCode:()=>n.value}),y(()=>{p()}),(e,t)=>{const o=x;return k(),b("div",I,[s("div",A,[S(o,{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=a=>l.value=a),placeholder:"请输入验证码",size:"large",maxlength:"4",clearable:"",onInput:t[1]||(t[1]=a=>e.$emit("input",l.value))},null,8,["modelValue"])]),s("div",{class:"captcha-image",onClick:u},[s("canvas",{ref_key:"captchaCanvas",ref:d,width:"120",height:"40",title:"点击刷新验证码"},null,512)])])}}},N=w(B,[["__scopeId","data-v-698c8958"]]);export{N as C};
