import{u as ee}from"./index-bcd0f302.js";/* empty css                  *//* empty css                   */import{_ as L}from"./_plugin-vue_export-helper-8da67cfc.js";/* empty css                     *//* empty css                  */import"./el-tooltip-4ed993c7.js";import{al as N,y as l,H as u,I as e,C as E,K as R,L as k,A as o,O as m,z as h,P as S,a4 as D,aB as te,aC as ae,r as $,c as B,Q as a,u as r,M as y,T as oe}from"./vendor-b2a91a46.js";import{c as j,d as ne,e as le,f as se,o as ie,g as re,h as ue,l as de,s as ce,j as me,k as _e,E as pe,m as fe,n as he,p as ge,q as be,r as ve,t as ye,u as ke,v as we,w as xe,x as Ee,y as Me,z as Ce,A as Ie}from"./elementPlus-9365ac08.js";/* empty css                 */import"./utils-88d415ea.js";const Be={class:"menu-title-wrapper"},Se=Object.assign({name:"MenuItem"},{__name:"MenuItem",props:{route:{type:Object,required:!0}},setup(n){const w=_=>_==="HOT"?"danger":/^\d+$/.test(_)?"warning":"info";return(_,i)=>{const c=j,p=ne,A=N("menu-item",!0),M=le,T=se;return n.route.children&&n.route.children.length>0?(l(),u(M,{key:0,index:n.route.path},{title:e(()=>[n.route.meta.icon?(l(),u(c,{key:0,class:E({"highlight-icon":n.route.meta.highlight})},{default:e(()=>[(l(),u(R(n.route.meta.icon)))]),_:1},8,["class"])):k("",!0),o("span",{class:E({"highlight-text":n.route.meta.highlight})},m(n.route.meta.title),3),n.route.meta.badge?(l(),u(p,{key:1,value:n.route.meta.badge,type:w(n.route.meta.badge),class:"menu-badge"},null,8,["value","type"])):k("",!0)]),default:e(()=>[(l(!0),h(S,null,D(n.route.children,g=>(l(),u(A,{key:g.path,route:g},null,8,["route"]))),128))]),_:1},8,["index"])):(l(),u(T,{key:1,index:n.route.path,class:E({"highlight-menu":n.route.meta.highlight})},{title:e(()=>[o("div",Be,[o("span",{class:E({"highlight-text":n.route.meta.highlight})},m(n.route.meta.title),3),n.route.meta.badge?(l(),u(p,{key:0,value:n.route.meta.badge,type:w(n.route.meta.badge),class:"menu-badge"},{default:e(()=>i[0]||(i[0]=[o("span",null,null,-1)])),_:1,__:[0]},8,["value","type"])):k("",!0)])]),default:e(()=>[n.route.meta.icon?(l(),u(c,{key:0,class:E({"highlight-icon":n.route.meta.highlight})},{default:e(()=>[(l(),u(R(n.route.meta.icon)))]),_:1},8,["class"])):k("",!0)]),_:1},8,["index","class"]))}}}),F=L(Se,[["__scopeId","data-v-143c83f2"]]);const De={class:"layout-container"},Ae={class:"sidebar-logo"},Te={key:0},He={key:1},qe={class:"header-content"},Re={class:"header-left"},Ve={class:"mobile-title"},ze={class:"header-right"},Oe={class:"user-info"},$e={class:"username"},Fe={class:"mobile-sidebar-content"},Le={class:"mobile-sidebar-header"},Ne={class:"mobile-user-info"},je={class:"mobile-user-details"},Ue={class:"mobile-username"},Pe={class:"mobile-role"},We={class:"mobile-sidebar-footer"},Ge={__name:"index",setup(n){const w=te(),_=ae(),i=ee(),c=$(!1),p=$(!1),A=()=>{c.value=!c.value},M=()=>{p.value=!p.value},T=()=>{p.value=!1},g=B(()=>{const{path:d}=w;return d}),U=B(()=>{var t;const d=H.value.find(f=>f.path===g.value);return((t=d==null?void 0:d.meta)==null?void 0:t.title)||"排班管理系统"}),H=B(()=>{var t;const d=(t=i.userInfo)==null?void 0:t.role;return d==="admin"?[{path:"/admin/dashboard",name:"AdminDashboard",meta:{title:"管理工作台",icon:"HomeFilled",badge:""}},{path:"/admin/employees",name:"Employees",meta:{title:"员工管理",icon:"User",badge:""}},{path:"/admin/availability",name:"Availability",meta:{title:"空闲时间",icon:"Clock",badge:""}},{path:"/admin/schedules",name:"Schedules",meta:{title:"AI智能排班",icon:"Calendar",badge:"HOT"}},{path:"/admin/shift-requests",name:"ShiftRequests",meta:{title:"调班申请管理",icon:"Document",badge:""}},{path:"/admin/work-hours",name:"AdminWorkHours",meta:{title:"工时统计",icon:"Timer",badge:""}},{path:"/admin/referral-management",name:"AdminReferralManagement",meta:{title:"推荐人员管理",icon:"Connection",badge:""}},{path:"/admin/settings",name:"Settings",meta:{title:"系统设置",icon:"Setting",badge:""}}]:d==="employee"?[{path:"/employee/dashboard",name:"EmployeeDashboard",meta:{title:"工作台",icon:"HomeFilled",badge:""}},{path:"/employee/availability",name:"EmployeeAvailability",meta:{title:"我的空闲时间",icon:"Clock",badge:""}},{path:"/employee/shift-requests",name:"EmployeeShiftRequests",meta:{title:"我的调班申请",icon:"Document",badge:""}},{path:"/employee/work-hours",name:"EmployeeWorkHours",meta:{title:"我的工时",icon:"Timer",badge:""}},{path:"/employee/referral-management",name:"EmployeeReferralManagement",meta:{title:"我的推荐",icon:"Share",badge:""}}]:[]}),P=B(()=>w.matched.filter(t=>t.meta&&t.meta.title).map(t=>({path:t.path,title:t.meta.title}))),C=async d=>{var t;switch(d){case"change-password":const f=(t=i.userInfo)==null?void 0:t.role;f==="admin"?_.push("/admin/change-password"):f==="employee"&&_.push("/employee/change-password");break;case"settings":_.push("/admin/settings");break;case"logout":try{await _e.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await i.logout(),pe.success("已成功退出登录"),_.push("/login")}catch(I){I!=="cancel"&&console.error("Logout failed:",I)}break}};return(d,t)=>{const f=fe,I=he,b=ge,v=j,W=Ie,G=be,V=ve,q=ye,K=ke,Q=we,J=xe,X=N("router-view"),Y=Ee,z=Me,Z=Ce;return l(),h("div",De,[a(z,{class:"desktop-layout"},{default:e(()=>[a(I,{width:c.value?"64px":"200px",class:"desktop-sidebar"},{default:e(()=>[o("div",Ae,[c.value?(l(),h("span",He,"📅")):(l(),h("span",Te,"📅 排班管理系统"))]),a(f,{"default-active":g.value,collapse:c.value,"unique-opened":!1,router:"","background-color":"#fff","text-color":"#303133","active-text-color":"#409eff"},{default:e(()=>[(l(!0),h(S,null,D(H.value,s=>(l(),u(F,{key:s.path,route:s},null,8,["route"]))),128))]),_:1},8,["default-active","collapse"])]),_:1},8,["width"]),a(z,null,{default:e(()=>[a(J,null,{default:e(()=>[o("div",qe,[o("div",Re,[a(b,{type:"text",onClick:A,icon:c.value?"Expand":"Fold",class:"desktop-toggle"},null,8,["icon"]),a(b,{type:"text",onClick:M,class:"mobile-toggle"},{default:e(()=>[a(v,null,{default:e(()=>[a(r(ie))]),_:1})]),_:1}),a(G,{separator:"/",class:"desktop-breadcrumb"},{default:e(()=>[(l(!0),h(S,null,D(P.value,s=>(l(),u(W,{key:s.path,to:s.path},{default:e(()=>[y(m(s.title),1)]),_:2},1032,["to"]))),128))]),_:1}),o("div",Ve,m(U.value),1)]),o("div",ze,[a(Q,{onCommand:C},{dropdown:e(()=>[a(K,null,{default:e(()=>{var s;return[a(q,{command:"change-password"},{default:e(()=>t[4]||(t[4]=[y("修改密码",-1)])),_:1,__:[4]}),((s=r(i).userInfo)==null?void 0:s.role)==="admin"?(l(),u(q,{key:0,command:"settings"},{default:e(()=>t[5]||(t[5]=[y("系统设置",-1)])),_:1,__:[5]})):k("",!0),a(q,{divided:"",command:"logout"},{default:e(()=>t[6]||(t[6]=[y("退出登录",-1)])),_:1,__:[6]})]}),_:1})]),default:e(()=>[o("span",Oe,[a(V,{size:32,src:r(i).avatar},{default:e(()=>[y(m(r(i).username.charAt(0)),1)]),_:1},8,["src"]),o("span",$e,m(r(i).username),1),a(v,{class:"dropdown-icon"},{default:e(()=>[a(r(re))]),_:1})])]),_:1})])])]),_:1}),a(Y,null,{default:e(()=>[a(X,null,{default:e(({Component:s})=>[a(oe,{name:"fade",mode:"out-in"},{default:e(()=>[(l(),u(R(s)))]),_:2},1024)]),_:1})]),_:1})]),_:1})]),_:1}),a(Z,{modelValue:p.value,"onUpdate:modelValue":t[3]||(t[3]=s=>p.value=s),"with-header":!1,direction:"ltr",size:"280px",class:"mobile-drawer"},{default:e(()=>{var s,O;return[o("div",Fe,[o("div",Le,[t[7]||(t[7]=o("div",{class:"mobile-logo"},[o("span",{class:"logo-icon"},"📅"),o("span",{class:"logo-text"},"排班管理系统")],-1)),a(b,{type:"text",onClick:M,class:"close-button"},{default:e(()=>[a(v,null,{default:e(()=>[a(r(ue))]),_:1})]),_:1})]),o("div",Ne,[a(V,{size:48,src:r(i).avatar},{default:e(()=>[y(m(r(i).username.charAt(0)),1)]),_:1},8,["src"]),o("div",je,[o("div",Ue,m(r(i).username),1),o("div",Pe,m(((s=r(i).userInfo)==null?void 0:s.role)==="admin"?"管理员":"员工"),1)])]),a(f,{"default-active":g.value,"unique-opened":!1,router:"","background-color":"transparent","text-color":"#303133","active-text-color":"#409eff",class:"mobile-menu",onSelect:T},{default:e(()=>[(l(!0),h(S,null,D(H.value,x=>(l(),u(F,{key:x.path,route:x},null,8,["route"]))),128))]),_:1},8,["default-active"]),o("div",We,[a(b,{type:"text",onClick:t[0]||(t[0]=x=>C("change-password")),class:"footer-action"},{default:e(()=>[a(v,null,{default:e(()=>[a(r(de))]),_:1}),t[8]||(t[8]=o("span",null,"修改密码",-1))]),_:1,__:[8]}),((O=r(i).userInfo)==null?void 0:O.role)==="admin"?(l(),u(b,{key:0,type:"text",onClick:t[1]||(t[1]=x=>C("settings")),class:"footer-action"},{default:e(()=>[a(v,null,{default:e(()=>[a(r(ce))]),_:1}),t[9]||(t[9]=o("span",null,"系统设置",-1))]),_:1,__:[9]})):k("",!0),a(b,{type:"text",onClick:t[2]||(t[2]=x=>C("logout")),class:"footer-action logout"},{default:e(()=>[a(v,null,{default:e(()=>[a(r(me))]),_:1}),t[10]||(t[10]=o("span",null,"退出登录",-1))]),_:1,__:[10]})])])]}),_:1},8,["modelValue"])])}}},lt=L(Ge,[["__scopeId","data-v-bb8f7143"]]);export{lt as default};
